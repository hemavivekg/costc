<!DOCTYPE html>
<html>
<title>ODI World Cup 2023 - Point Calculator</title>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

</head>

<body>
<script>
      var app = angular.module("myShoppingList", []);
      app.controller("myCtrl", function ($scope, $http, $window, $timeout, $interval,$location) {

            var objDetail = {};
            console.log('hi')
            $scope.totalOptions = 0;
            $scope.innerWidth = $window.innerWidth;
            $scope.nextLevel = [];
            $scope.excZero = false;
            $scope.twoColumnLayout = false;

            var readPath = "data62";
            if ($window.location.search)
                  readPath = 'data' + $window.location.search.replace('?source=','');
            $interval(function() {
                  $scope.newsClass = "hideNews";
                  $timeout(function() {
                        $scope.newsClass = "showNews";
                        if ($scope.newsCount == $scope.news.length -1)
                              $scope.newsCount = 0;
                        else
                              $scope.newsCount++;    
                  },550);
            }
            , 5000);


            function GetWinDataFromServer(pos) {
                  var parm = '';
                  $scope.loading = true;
                  $http.get(readPath + '/detailedwin_' + pos + '.json?' + (new Date()).getMilliseconds().toString()).
                        then(function (response) {
                              $scope.detailedWin = JSON.parse(response.data[0].name);
                              $scope.loading = false;
                              $scope.selectDetailViewSampleWinNew();
                        });
            }


            function GetDataFromServer(pos) {
                  var parm = '';
                  console.log(pos + ' - ' + $scope.rootPos);
                  if (pos) {
                        parm = "?pos=" + pos;
                  }
                  $scope.loading = true;
                  $http.get(readPath + '/summary_' + pos + '.json?' + (new Date()).getMilliseconds().toString()).
                        then(function (response) {

                              $scope.greeting = response.data;
                              objDetail = {};
                              var firstobj;
                              $scope.loading = false;
                              if (pos) {
                                    $scope.positionObj = [];
                              }
                              else {
                                    $scope.rootPos = 1;
                                    $scope.positionObj = [];
                              }

                              if (!pos)
                                    pos = 1;

                              $scope.posAry = [pos, pos * 2, (pos * 2) + 1];
                              $scope.totalOptions = 2 ** ($scope.upcomingMatches.length - $scope.curMatchPos);
                              $scope.totalCurrentMatch = ($scope.upcomingMatches.length - $scope.curMatchPos);
                              $scope.totalOptionsNext = 2 ** ($scope.upcomingMatches.length - $scope.curMatchPos - 1);
                              $scope.totalNextMatch = ($scope.upcomingMatches.length - $scope.curMatchPos - 1);
                              $scope.curMatch = 0;
                              for (var x = 0; x < response.data.length; x++) {
                                    $scope.positionObj.push(JSON.parse(response.data[x].name));
                              }
                              if (!$scope.totalOptionsRoot)
                                    $scope.totalOptionsRoot = $scope.totalOptions;
                              console.log($scope.positionObj);
                        });
            }

            $scope.totalOptionsRoot = 0;

            $scope.nextLevelCounter = 0;

            const d = new Date();
            let ms = d.getMilliseconds();
            $scope.loading = true;
            console.log('before init');
            console.log(readPath + '/initData.json?q=' + ms.toString());
            $http.get(readPath + '/initData.json?q=' + ms.toString()).
                  then(function (response) {
                        console.log(response);
                        $scope.loading = false;
                        teams = response.data.currentPoints;
                        $scope.nextLevelCounter = response.data.nextLevelCounter;
                        teams.sort((a, b) => (b.point == a.point ? parseFloat(b.runrate) - parseFloat(a.runrate) : b.point - a.point));

                        

                        $scope.teamsNew = JSON.parse(JSON.stringify(teams));

                        console.log('JSON.stringify(teams)');
                        console.log(JSON.stringify(teams));
                        console.log(JSON.stringify(teams.map(e => ({...e,  "runrate" : (response.data.highrunrate[e.name.toUpperCase()] ? 2 : 1)}))));
                        teams = teams.map(e => ({...e,  "runrate" : (response.data.highrunrate[e.name.toUpperCase()] ? 2 : 1)}));

                        $scope.textFooter = response.data.textFooter;
                        $scope.linkFooter = response.data.linkFooter;
                        $scope.news = response.data.news;
                        $scope.newsCount = 0;      
                        initialize();
                        console.log('222');

                        $scope.rootPos = response.data.rootPos;

                        $scope.maxintegerhandling = 0;
                        if (response.data.maxintegerhandling)
                        {
                              $scope.maxintegerhandling = response.data.maxintegerhandling; 

                        }

                        var removeMatches = Math.floor(Math.log((($scope.rootPos % 2) == 1 ? ($scope.rootPos - 1) : $scope.rootPos)) / Math.log(2)) + $scope.maxintegerhandling;
                        if (parseInt(removeMatches) == false)
                              removeMatches = 0;
                        if (removeMatches < 0)
                              removeMatches = 0;

                        //$scope.upcomingMatches = JSON.parse(response.data.matches);
                        console.log('helol ');
                        console.log( removeMatches);
                        $scope.upcomingMatches = $scope.upcomingMatches.slice(removeMatches);


                        $scope.winTeam = response.data.winteam;

                        $scope.selectDetailViewSampleWinNew();
                        //GetDataFromServer($scope.rootPos);
                        //GetWinDataFromServer($scope.rootPos);
                  });


            var teams = [
                  { name: 'GT', desc: 'Gujarat', point: 8, won: 0, lost: 0 },
                  { name: 'RR', desc: 'Rajasdan Royals', point: 6, won: 0, lost: 0 },
                  { name: 'LSG', desc: 'Lucknow Super Giants', point: 10, won: 0, lost: 0 },
                  { name: 'DC', desc: 'Delhi Capitals', point: 6, won: 0, lost: 0 },
                  { name: 'RCB', desc: 'Royal Challengers', point: 10, won: 0, lost: 0 },
                  { name: 'KKR', desc: 'Kolkota Knight Riders', point: 8, won: 0, lost: 0 },
                  { name: 'PBKS', desc: 'Punjab', point: 12, won: 0, lost: 0 },
                  { name: 'SRH', desc: 'Sun Risers Hydrabad', point: 6, won: 0, lost: 0 },
                  { name: 'CSK', desc: 'Chennai Super Kings', point: 0, won: 0, lost: 0 },
                  { name: 'MI', desc: 'Mumbai', point: 10, won: 0, lost: 0 },
            ];


            $scope.teams = teams;

            $scope.detailedTeam = "gt";
            $scope.detailedPos = "-1";
            $scope.detailedType = "point";


            $scope.myPointFilter = function (item, arr) {
                  return arr < 11 || item == 'Run Rate';
            };

            var teamsObj = {
                  'GT': { point: [], runrate: [] },
                  'RR': { point: [], runrate: [] },
                  'LSG': { point: [], runrate: [] },
                  'DC': { point: [], runrate: [] },
                  'RCB': { point: [], runrate: [] },
                  'KKR': { point: [], runrate: [] },
                  'PBKS': { point: [], runrate: [] },
                  'SRH': { point: [], runrate: [] },
                  'CSK': { point: [], runrate: [] },
                  'MI': { point: [], runrate: [] },

            };




            initialize();

            function initialize() {

                  $scope.teams = teams;

                  for (var i = 0; i < teams.length; i++) {
                        teamsObj[teams[i].name].currentPoint = teams[i].point;
                        teamsObj[teams[i].name].point = teams[i].point;
                        teamsObj[teams[i].name].desc = teams[i].desc;
                        teamsObj[teams[i].name].won = teams[i].won;
                        teamsObj[teams[i].name].lost = teams[i].lost;
                        teamsObj[teams[i].name].runrate = teams[i].runrate;
                        teamsObj[teams[i].name].pointSeries = [];
                        teamsObj[teams[i].name].runrateSeries = [];
                        teamsObj[teams[i].name].played = teams[i].aplayed;
                        teamsObj[teams[i].name].totallost = teams[i].aplayed;
                  }
                  $scope.teamsObj = teamsObj;
                  $scope.teamsObjRoot = JSON.parse(JSON.stringify(teamsObj));

                  $scope.teamsObjFuture = JSON.parse(JSON.stringify(teamsObj));


            }
            var flowIndex = 0;
            var matchIndex = 0;
            var objResult = [];
            objResult[0] = {};
            var globalNu = 0;

            var posPoint = 3;


            //recurMatch(0, 0, '');

            //$scope.teamsObjNew = teamsObjNew;

            $scope.teamNames = Object.keys(teamsObj).sort();
            $scope.teamNamesNew = Object.keys(teamsObj).map(e => e.toString().toLowerCase()).sort();
            //$scope.teamNamesNew = Object.keys(teamsObjNew);
            $scope.teamNames.unshift('All');
            //console.log('$scope.teamNamesNew');

            //console.log($scope.teamNames);
            //console.log($scope.teamNamesNew);

            var teams1;


            $scope.getKeys = function (mat) {
                  var arr = [];
                  var keysArr = Object.keys(mat)
                  for (var x = 0; x < keysArr.length; x++) {
                        if (!teamsObj[keysArr[x]]) {
                              arr.push(keysArr[x]);
                        }
                  }
                  return arr;
            }

            $scope.showTeamSummaryPoint = function (name, obj, isRunRate) {

                  $scope.showDetail = true;

                  $scope.currentTeamObj = JSON.parse(JSON.stringify(obj));
                  if (isRunRate) {
                        $scope.currentTeamObj.point = obj.runrate;
                  }
                  $scope.selectedTeam = name;
                  teams1 = teams1.sort((a, b) => b.point - a.point);
            }

            $scope.selectedTeamDropDown = "All";
            $scope.calculatePoints = function (obj) {
                  if (obj.showPointSummary) {
                        obj.showPointSummary = false;
                  }
                  else {
                        obj.showPointSummary = true;
                        if (!obj.resultPointSummary) {
                              var teams1 = JSON.parse(JSON.stringify(teams));
                              for (var j = 0; j < teams1.length; j++) {
                                    if (parseInt(obj.points[teams1[j].name]) > 0)
                                          teams1[j].point = teams1[j].point + parseInt(obj.points[teams1[j].name]);
                              }
                              //$scope.showPointSummary = true;
                              obj.resultPointSummary = teams1;
                        }


                  }
            }

            $scope.getPercentage = function (val, level) {
                  if (level == -1) {
                        return parseFloat((val / $scope.detailedWin[$scope.winTeam][$scope.winNumber * 2].PosCount) * 100).toFixed(2) + '%';
                        //return '%';
                  }
                  else if (level == 1)
                        return parseFloat((val / $scope.totalOptions) * 100).toFixed(2) + '%';
                  else
                        return parseFloat((val / $scope.totalOptionsNext) * 100).toFixed(2) + '%';

            }

            $scope.getPercentageBar = function (val, level) {
                  var rtnValue = '';
                  if (level == -1) {
                        rtnValue = parseFloat((val / $scope.detailedWin[$scope.winTeam][$scope.winNumber * 2].PosCount) * 100).toFixed(2);
                        //return '%';
                  }
                  else if (level == 1)
                        rtnValue = parseFloat((val / $scope.totalOptions) * 100).toFixed(2);
                  else
                        rtnValue = parseFloat((val / $scope.totalOptionsNext) * 100).toFixed(2);

                  if (rtnValue < 0.9 && val > 0)
                        rtnValue = "0.9";
                  /*      
                  if (rtnValue < 10 && val > 0)
                        rtnValue = "10";
                  */

                  return rtnValue + '%'            

            }

            $scope.copycontent = "hello";
            $scope.myFunction = function() {
  // Get the text field
  var copyText = document.getElementById("myInput");;
console.log("hi")
  // Select the text field
  copyText.select();
  copyText.setSelectionRange(0, 99999); // For mobile devices

   // Copy the text inside the text field
  navigator.clipboard.writeText(copyText.value);

  // Alert the copied text
  alert("Copied the text: " + copyText.value);
}

            $scope.showArrow = function (val, val1, val2, level) {
                  if (level == 1) {
                        if (parseFloat((val1 / $scope.totalOptions) * 100) > parseFloat((val2 / $scope.totalOptions) * 100))
                              return "+";
                        else if (parseFloat((val1 / $scope.totalOptions) * 100) < parseFloat((val2 / $scope.totalOptions) * 100))
                              return "-";

                  }
                  else if (level == 2) {
                        if (parseFloat((val1 / $scope.totalOptions) * 100) > parseFloat((val2 / $scope.totalOptions) * 100))
                              return "-";
                        else if (parseFloat((val1 / $scope.totalOptions) * 100) < parseFloat((val2 / $scope.totalOptions) * 100))
                              return "+";
                  }
            }

            function truncateDecimals(number, digits) {
                  var multiplier = Math.pow(10, digits),
                        adjustedNum = number * multiplier,
                        truncatedNum = Math[adjustedNum < 0 ? 'ceil' : 'floor'](adjustedNum);

                  return truncatedNum / multiplier;
            };


            $scope.setExcZeroValue = function () {
                  $scope.excZero = !$scope.excZero;
            };
            $scope.getNumberFormat = function (val,mobileFormat) {
                  if (!val)
                        return 0;
                  var x = val;
                  var cro1 = 10000000;
                  var cro100 = 1000000000;
                  var lakh1 = 100000;
                  var tenk = 10000;
                  if ($scope.innerWidth < 650 || mobileFormat) {

                        var returnVal = '';
                        if (val > cro1) {
                              returnVal = (val / cro1).toString().substring(0, 4) + ' Cr';
                        }
                        else if (val > lakh1) {
                              returnVal = (val / lakh1).toString().substring(0, 4) + ' L';
                        }
                        else if (val > tenk) {
                              returnVal = (val / tenk).toString().substring(0, 4) + ' K';
                        }
                        if (returnVal)
                              return returnVal.replace(". ", " ");
                  }

                  x = x.toString();
                  var lastThree = x.substring(x.length - 3);
                  var otherNumbers = x.substring(0, x.length - 3);
                  if (otherNumbers != '')
                        lastThree = ',' + lastThree;
                  return otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ",") + lastThree;
            }

            $scope.matchSelected = false;
            $scope.selectResult = function (result) {
                  console.log('comers here ');
                  $scope.matchSelected = true;
                  $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team1].lost = 0;
                  $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team2].lost = 0;

                  //$scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team1)[0].lost = 0;
                  //$scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team2)[0].lost = 0;

                  if (result == 1) {
                        //$scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team1)[0].lost =  2;
                        $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team1].lost = 2;
                        //$scope.upcomingMatches[$scope.curMatchPos]
                  }
                  else if (result == 2) {
                        //$scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team2)[0].lost =  2;
                        $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team2].lost = 2;
                  }
                  else {
                        $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team1].lost = 1;
                        $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team2].lost = 1;

                        //$scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team1)[0].lost = 1;
                        //$scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team2)[0].lost = 1;

                  }

                  //$scope.teamsObj.map(e => e.newpoint = e.won + e.lost + e.point);
                  var keys = Object.keys($scope.teamsObj);
                  $scope.teamsNewPoint = keys.map(e => ({ name: e, point: $scope.teamsObj[e].won + $scope.teamsObj[e].lost + $scope.teamsObj[e].point, runrate: $scope.teamsObj[e].runrate }));
                  $scope.teamsNewPoint.sort((a, b) => (b.point == a.point ? parseFloat(b.runrate) - parseFloat(a.runrate) : b.point - a.point));

                  //$scope.curMatch = result;        
            }

            /*
            $scope.getLossCount = function (opt) {
                  var ar = Object.keys(opt.matches);
                  var resultCount = 0;
                  for (var i = 0; i < ar.length; i++) {
                        if ($scope.matchesObj[ar[i]][opt.matches[ar[i]]] == $scope.selectedTeam)
                              resultCount = resultCount + 1;
                  }
                  return resultCount;
            }
            */

            $scope.positionList = ["All", "1", "1 - 2", "2", "3", "3 - 4", "4", "5", "6", "7", "8", "9", "10", "Top 2", "Top 3-4", "Top 4"];
            $scope.selectedPos = "1 - 2";

            $scope.positionList2 = ["All", "1", "1 - 2", "2", "3", "3 - 4", "4", "5", "6", "7", "8", "9", "10", "Top 2", "Top 4"];

            $scope.pointOptions = [{ name: 'Point', value: 'point' }, { name: 'Run Rate', value: 'rr' }];

            $scope.changeOption = function () {
                  //alert($scope.selectedPos);
                  var sss = $scope.winNumber;
                  if ($scope.selectedPos == "All")
                        $scope.positionVisible = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
                  else if ($scope.selectedPos == "Top 2")
                        $scope.positionVisible = [11];
                  else if ($scope.selectedPos == "Top 3-4")
                        $scope.positionVisible = [12];
                  else if ($scope.selectedPos == "Top 4")
                        $scope.positionVisible = [11, 12];
                  else
                        $scope.positionVisible = $scope.selectedPos.toString().split(" - ");

            }

            $scope.selectedPointOption = "All";

            $scope.changePointOption = function () {
                  //alert($scope.selectedPointOption);

                  if ($scope.selectedPointOption == "All")
                        $scope.pointOptions = [{ name: 'Point', value: 'point' }, { name: 'Run Rate', value: 'rr' }];
                  else if ($scope.selectedPointOption == "Point")
                        $scope.pointOptions = [{ name: 'Point', value: 'point' }];
                  else if ($scope.selectedPointOption == "Run Rate")
                        $scope.pointOptions = [{ name: 'Run Rate', value: 'rr' }];

            }

            $scope.changeOptionTeam = function () {
                  if ($scope.selectedTeamDropDown == 'All')
                        $scope.teamNamesNew = $scope.teamNames.filter(e => e != 'All').map(e => e.toString().toLowerCase());
                  else
                        $scope.teamNamesNew = $scope.teamNames.filter(e => e == $scope.selectedTeamDropDown.toUpperCase()).map(e => e.toString().toLowerCase());
                  //$scope.selectedTeamDropDown = $scope.selectedPos.toString().split(" - ");
            }

            $scope.changeOptionTeamWin = function () {
                  $scope.selectWinDetails($scope.winTeamCaps.toLowerCase());
            }

            $scope.upcomingMatches = [

            { date: "05-Apr 15.30", team1: "CSK", team2: "DC", result: "", SlNo: "17" },
  { date: "05-Apr 19.30", team1: "PBKS", team2: "RR", result: "", SlNo: "18" },
  { date: "06-Apr 19.30", team1: "SRH", team2: "GT", result: "", SlNo: "19" },
  { date: "07-Apr 19.30", team1: "MI", team2: "RCB", result: "", SlNo: "20" },
  { date: "08-Apr 15.30", team1: "KKR", team2: "LSG", result: "", SlNo: "21" },
{ date: '08-Apr 19.30', team1: 'PBKS', team2: 'CSK', result: '',SlNo: '22' },
{ date: '09-Apr 19.30', team1: 'GT', team2: 'RR', result: '',SlNo: '23' },
{ date: '10-Apr 19.30', team1: 'RCB', team2: 'DC', result: '',SlNo: '24' },
{ date: '11-Apr 19.30', team1: 'CSK', team2: 'KKR', result: '',SlNo: '25' },
{ date: '12-Apr 15.30', team1: 'LSG', team2: 'GT', result: '',SlNo: '26' },
{ date: '12-Apr 19.30', team1: 'SRH', team2: 'PBKS', result: '',SlNo: '27' },
{ date: '13-Apr 15.30', team1: 'RR', team2: 'RCB', result: '',SlNo: '28' },
{ date: '13-Apr 19.30', team1: 'DC', team2: 'MI', result: '',SlNo: '29' },
{ date: '14-Apr 19.30', team1: 'LSG', team2: 'CSK', result: '',SlNo: '30' },
{ date: '15-Apr 19.30', team1: 'PBKS', team2: 'KKR', result: '',SlNo: '31' },
{ date: '16-Apr 19.30', team1: 'DC', team2: 'RR', result: '',SlNo: '32' },
{ date: '17-Apr 19.30', team1: 'MI', team2: 'SRH', result: '',SlNo: '33' },
{ date: '18-Apr 19.30', team1: 'RCB', team2: 'PBKS', result: '',SlNo: '34' },
{ date: '19-Apr 15.30', team1: 'GT', team2: 'DC', result: '',SlNo: '35' },
{ date: '19-Apr 19.30', team1: 'RR', team2: 'LSG', result: '',SlNo: '36' },
{ date: '20-Apr 15.30', team1: 'PBKS', team2: 'RCB', result: '',SlNo: '37' },
{ date: '20-Apr 19.30', team1: 'MI', team2: 'CSK', result: '',SlNo: '38' },
{ date: '21-Apr 19.30', team1: 'KKR', team2: 'GT', result: '',SlNo: '39' },
{ date: '22-Apr 19.30', team1: 'LSG', team2: 'DC', result: '',SlNo: '40' },
{ date: '23-Apr 19.30', team1: 'SRH', team2: 'MI', result: '',SlNo: '41' },
{ date: '24-Apr 19.30', team1: 'RCB', team2: 'RR', result: '',SlNo: '42' },
{ date: '25-Apr 19.30', team1: 'CSK', team2: 'SRH', result: '',SlNo: '43' },
{ date: '26-Apr 19.30', team1: 'KKR', team2: 'PBKS', result: '',SlNo: '44' },
{ date: '27-Apr 15.30', team1: 'MI', team2: 'LSG', result: '',SlNo: '45' },
{ date: '27-Apr 19.30', team1: 'DC', team2: 'RCB', result: '',SlNo: '46' },
{ date: '28-Apr 19.30', team1: 'RR', team2: 'GT', result: '',SlNo: '47' },
{ date: '29-Apr 19.30', team1: 'DC', team2: 'KKR', result: '',SlNo: '48' },
{ date: '30-Apr 19.30', team1: 'CSK', team2: 'PBKS', result: '',SlNo: '49' },
{ date: '01-May 19.30', team1: 'RR', team2: 'MI', result: '',SlNo: '50' },
{ date: '02-May 19.30', team1: 'GT', team2: 'SRH', result: '',SlNo: '51' },
{ date: '03-May 19.30', team1: 'RCB', team2: 'CSK', result: '',SlNo: '52' },
{ date: '04-May 15.30', team1: 'KKR', team2: 'RR', result: '',SlNo: '53' },
{ date: '04-May 19.30', team1: 'PBKS', team2: 'LSG', result: '',SlNo: '54' },
{ date: '05-May 19.30', team1: 'SRH', team2: 'DC', result: '',SlNo: '55' },
{ date: '06-May 19.30', team1: 'MI', team2: 'GT', result: '',SlNo: '56' },
{ date: '07-May 19.30', team1: 'KKR', team2: 'CSK', result: '',SlNo: '57' },
{ date: '08-May 19.30', team1: 'PBKS', team2: 'DC', result: '',SlNo: '58' },
{ date: '09-May 19.30', team1: 'LSG', team2: 'RCB', result: '',SlNo: '59' },
{ date: '10-May 19.30', team1: 'SRH', team2: 'KKR', result: '',SlNo: '60' },
{ date: '11-May 15.30', team1: 'PBKS', team2: 'MI', result: '',SlNo: '61' },
{ date: '11-May 19.30', team1: 'DC', team2: 'GT', result: '',SlNo: '62' },
{ date: '12-May 19.30', team1: 'CSK', team2: 'RR', result: '',SlNo: '63' },
{ date: '13-May 19.30', team1: 'RCB', team2: 'SRH', result: '',SlNo: '64' },
{ date: '14-May 19.30', team1: 'GT', team2: 'LSG', result: '',SlNo: '65' },
{ date: '15-May 19.30', team1: 'MI', team2: 'DC', result: '',SlNo: '66' },
{ date: '16-May 19.30', team1: 'RR', team2: 'PBKS', result: '',SlNo: '67' },
{ date: '17-May 19.30', team1: 'RCB', team2: 'KKR', result: '',SlNo: '68' },
{ date: '18-May 15.30', team1: 'GT', team2: 'CSK', result: '',SlNo: '69' },
{ date: '18-May 19.30', team1: 'LSG', team2: 'SRH', result: '',SlNo: '70' },
];


//after war, disable for now
            $scope.upcomingMatches1 = [

            { date: "05-Apr 15.30", team1: "CSK", team2: "DC", result: "", SlNo: "17" },
  { date: "05-Apr 19.30", team1: "PBKS", team2: "RR", result: "", SlNo: "18" },
  { date: "06-Apr 19.30", team1: "SRH", team2: "GT", result: "", SlNo: "19" },
  { date: "07-Apr 19.30", team1: "MI", team2: "RCB", result: "", SlNo: "20" },
  { date: "08-Apr 15.30", team1: "KKR", team2: "LSG", result: "", SlNo: "21" },
{ date: '08-Apr 19.30', team1: 'PBKS', team2: 'CSK', result: '',SlNo: '22' },
{ date: '09-Apr 19.30', team1: 'GT', team2: 'RR', result: '',SlNo: '23' },
{ date: '10-Apr 19.30', team1: 'RCB', team2: 'DC', result: '',SlNo: '24' },
{ date: '11-Apr 19.30', team1: 'CSK', team2: 'KKR', result: '',SlNo: '25' },
{ date: '12-Apr 15.30', team1: 'LSG', team2: 'GT', result: '',SlNo: '26' },
{ date: '12-Apr 19.30', team1: 'SRH', team2: 'PBKS', result: '',SlNo: '27' },
{ date: '13-Apr 15.30', team1: 'RR', team2: 'RCB', result: '',SlNo: '28' },
{ date: '13-Apr 19.30', team1: 'DC', team2: 'MI', result: '',SlNo: '29' },
{ date: '14-Apr 19.30', team1: 'LSG', team2: 'CSK', result: '',SlNo: '30' },
{ date: '15-Apr 19.30', team1: 'PBKS', team2: 'KKR', result: '',SlNo: '31' },
{ date: '16-Apr 19.30', team1: 'DC', team2: 'RR', result: '',SlNo: '32' },
{ date: '17-Apr 19.30', team1: 'MI', team2: 'SRH', result: '',SlNo: '33' },
{ date: '18-Apr 19.30', team1: 'RCB', team2: 'PBKS', result: '',SlNo: '34' },
{ date: '19-Apr 15.30', team1: 'GT', team2: 'DC', result: '',SlNo: '35' },
{ date: '19-Apr 19.30', team1: 'RR', team2: 'LSG', result: '',SlNo: '36' },
{ date: '20-Apr 15.30', team1: 'PBKS', team2: 'RCB', result: '',SlNo: '37' },
{ date: '20-Apr 19.30', team1: 'MI', team2: 'CSK', result: '',SlNo: '38' },
{ date: '21-Apr 19.30', team1: 'KKR', team2: 'GT', result: '',SlNo: '39' },
{ date: '22-Apr 19.30', team1: 'LSG', team2: 'DC', result: '',SlNo: '40' },
{ date: '23-Apr 19.30', team1: 'SRH', team2: 'MI', result: '',SlNo: '41' },
{ date: '24-Apr 19.30', team1: 'RCB', team2: 'RR', result: '',SlNo: '42' },
{ date: '25-Apr 19.30', team1: 'CSK', team2: 'SRH', result: '',SlNo: '43' },
{ date: '26-Apr 19.30', team1: 'KKR', team2: 'PBKS', result: '',SlNo: '44' },
{ date: '27-Apr 15.30', team1: 'MI', team2: 'LSG', result: '',SlNo: '45' },
{ date: '27-Apr 19.30', team1: 'DC', team2: 'RCB', result: '',SlNo: '46' },
{ date: '28-Apr 19.30', team1: 'RR', team2: 'GT', result: '',SlNo: '47' },
{ date: '29-Apr 19.30', team1: 'DC', team2: 'KKR', result: '',SlNo: '48' },
{ date: '30-Apr 19.30', team1: 'CSK', team2: 'PBKS', result: '',SlNo: '49' },
{ date: '01-May 19.30', team1: 'RR', team2: 'MI', result: '',SlNo: '50' },
{ date: '02-May 19.30', team1: 'GT', team2: 'SRH', result: '',SlNo: '51' },
{ date: '03-May 19.30', team1: 'RCB', team2: 'CSK', result: '',SlNo: '52' },
{ date: '04-May 15.30', team1: 'KKR', team2: 'RR', result: '',SlNo: '53' },
{ date: '04-May 19.30', team1: 'PBKS', team2: 'LSG', result: '',SlNo: '54' },
{ date: '05-May 19.30', team1: 'SRH', team2: 'DC', result: '',SlNo: '55' },
{ date: '06-May 19.30', team1: 'MI', team2: 'GT', result: '',SlNo: '56' },
{ date: '07-May 19.30', team1: 'KKR', team2: 'CSK', result: '',SlNo: '57' },
  { date: "17-May 19.30", team1: "RCB", team2: "KKR", result: "", SlNo: "58" },
  { date: "18-May 19.30", team1: "RR", team2: "PBKS", result: "", SlNo: "59" },
  { date: "18-May 19.30", team1: "DC", team2: "GT", result: "", SlNo: "60" },
  { date: "19-May 15.30", team1: "LSG", team2: "SRH", result: "", SlNo: "61" },
  { date: "20-May 19.30", team1: "CSK", team2: "RR", result: "", SlNo: "62" },
  { date: "21-May 19.30", team1: "MI", team2: "DC", result: "", SlNo: "63" },
  { date: "22-May 19.30", team1: "GT", team2: "LSG", result: "", SlNo: "64" },
  { date: "23-May 19.30", team1: "RCB", team2: "SRH", result: "", SlNo: "65" },
  { date: "24-May 19.30", team1: "PBKS", team2: "DC", result: "", SlNo: "66" },
  { date: "25-May 19.30", team1: "GT", team2: "CSK", result: "", SlNo: "67" },
  { date: "25-May 19.30", team1: "SRH", team2: "KKR", result: "", SlNo: "68" },
  { date: "26-May 15.30", team1: "PBKS", team2: "MI", result: "", SlNo: "69" },
  { date: "27-May 19.30", team1: "LSG", team2: "RCB", result: "", SlNo: "70" },
];

$scope.curMatchPos = 0;
            //$scope.curMatch = $scope.curMatchPos;

            $scope.goToPrevious = function () {
                  //if ($scope.curMatch > $scope.curMatchPos)
                  //      $scope.curMatch = $scope.curMatch - 1;
                  if ($scope.curMatchPos > 0) {
                        //if ($scope.curMatchPos < $scope.upcomingMatches.length - 1) {
                        $scope.teamsObj[$scope.nextLevel[$scope.nextLevel.length - 1]].won = $scope.teamsObj[$scope.nextLevel[$scope.nextLevel.length - 1]].won - 2;
                        $scope.nextLevel.pop();
                        $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team1].lost = 0;
                        $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team2].lost = 0;
                        $scope.curMatchPos = $scope.curMatchPos - 1;
                        GetDataFromServer(Math.floor($scope.posAry[0] / 2));
                        GetWinDataFromServer(Math.floor($scope.posAry[0] / 2));
                        $scope.selectedOption = null;
                        $scope.matchSelected = false;
                  }
            };


            $scope.goToNext = function () {
                  if ($scope.curMatchPos < $scope.nextLevelCounter - 1 && $scope.selectedOption) {
                        //if ($scope.curMatchPos < $scope.upcomingMatches.length - 1) {
                        if ($scope.selectedOption == 1) {
                              $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team1].won = $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team1].won + 2;
                              //$scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team1)[0].won = $scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team1)[0].won + 2;
                              //$scope.upcomingMatches[$scope.curMatchPos]
                              $scope.nextLevel.push($scope.upcomingMatches[$scope.curMatchPos].team1.toUpperCase());
                        }
                        else if ($scope.selectedOption == 2) {
                              $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team2].won = $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team2].won + 2;
                              $scope.nextLevel.push($scope.upcomingMatches[$scope.curMatchPos].team2.toUpperCase());
                        }
                        else {
                              $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team1].won = $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team1].won + 1;
                              $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team2].won = $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team2].won + 1;

                              //$scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team1)[0].won = $scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team1)[0].won + 1;
                              //$scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team2)[0].won = $scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team2)[0].won + 1;

                        }
                        $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team1].lost = 0;
                        $scope.teamsObj[$scope.upcomingMatches[$scope.curMatchPos].team2].lost = 0;

                        //$scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team1)[0].lost = 0;
                        //$scope.teams.filter(e => e.name == $scope.upcomingMatches[$scope.curMatchPos].team2)[0].lost = 0;




                        $scope.curMatchPos = $scope.curMatchPos + 1;
                        GetDataFromServer($scope.posAry[$scope.selectedOption]);
                        GetWinDataFromServer($scope.posAry[$scope.selectedOption]);
                        $scope.selectedOption = null;
                        $scope.matchSelected = false;

                  }

            };

            $scope.detPosAry = [];

            $scope.hideDetailView = function () {
                  $scope.detailedPos = -1;

            }
            $scope.detailedLevel = 0;

            $scope.winNumber = "0";

            $scope.changeWinNumber = function () {
                  //$scope.winNumber = x;
                  var s = $scope.selectedPos;
                  $scope.winPos = Object.keys($scope.detailedWin[$scope.winTeam][$scope.winNumber * 2]);
                  //uncomment to include 13
                  $scope.winPos = $scope.winPos.filter(e => e != "13");
            }

            $scope.winRemainingAry = [];


            $scope.selectWinDetailsNew = function (team) {

                  $scope.winNumber = "0";
                  $scope.showWin = true;
                  $scope.winTeam = team;
                  $scope.winTeamCaps = team.toUpperCase();
                  $scope.winPos = Object.keys($scope.detailedWin[team][$scope.winNumber]);
                  //uncomment to include 13
                  $scope.winPos = $scope.winPos.filter(e => e != "13");
                  var startFromMatch = parseInt($scope.upcomingMatches[0].SlNo) + parseInt($scope.curMatchPos);
                  $scope.winRemaining = $scope.upcomingMatches.filter(e => e.SlNo >= startFromMatch && (e.team1 == team.toUpperCase() || e.team2 == team.toUpperCase())).length;

                  //$scope.winRemaining = $scope.upcomingMatches.filter(e => (e.team1 == team.toUpperCase() || e.team2 == team.toUpperCase())).length;


                  $scope.winRemainingAry = [];
                  for (var v = 0; v <= $scope.winRemaining; v++) {
                        $scope.winRemainingAry.push(v.toString());
                  }

            }

            $scope.selectWinDetails = function (team) {

                  if ($scope.detailedWin) {
                        $scope.selectWinDetailsNew(team);
                  }
                  else {

                  }


            }

            $scope.selectDetailViewPre = function (team, pos, type, level) {
                  $scope.highlightbar1 = team.toString() + '-' + pos + '-' + type + '-' + (level);
                  console.log('comes');
                  //$timeout($scope.selectDetailView(team, pos, type, level), 5000);

                  $timeout(function() {
                        $scope.selectDetailView(team, pos, type, level);
                        $scope.highlightbar1 = '';
                  }
                  , 250);

            }     


            $scope.selectDetailView = function (team, pos, type, level) {
                  $scope.detailedLevelActual = level;
                  if (level > 1)
                        $scope.detailedLevel = 1;
                  else
                        $scope.detailedLevel = 0;
                  if (objDetail[$scope.posAry[level - 1]]) {
                        $scope.currentMatchDetail = objDetail[$scope.posAry[level - 1]];

                        refreshCurrentMatch(team, pos, type, level);
                  }
                  else {
                        $scope.loading = true;
                        $http.get(readPath + '/detailed_' + $scope.posAry[level - 1] + '.json?' + (new Date()).getMilliseconds().toString()).
                              //$http.get('http://localhost:8000/getDataDetailView?' + 'pos=' + $scope.posAry[level - 1]).
                              then(function (response) {
                                    $scope.loading = false;
                                    //alert('hi');
                                    objDetail[$scope.posAry[level - 1]] = JSON.parse(response.data[0].name);
                                    $scope.currentMatchDetail = JSON.parse(response.data[0].name);
                                    refreshCurrentMatch(team, pos, type, level);
                              });

                  }

                  /*            
                  $scope.detailedTeam = team;
                  $scope.detailedPos = pos;
                  $scope.detailedType = type;
                  $scope.detPosAry = [];
                  $scope.detPosAry = Object.keys($scope.currentMatchDetail[team][pos][type]);
                  $scope.detPosAry.sort((a, b) => a - b);
                  */
                  //console.log(detPosAry);
            }

            function refreshCurrentMatch(team, pos, type, level) {


                  $scope.detailedTeam = team;
                  $scope.detailedPos = pos;
                  $scope.detailedType = type;
                  $scope.detailedPlayed = $scope.teamsObj[team.toUpperCase()].played;
                  $scope.detailedPoint = $scope.teamsObj[team.toUpperCase()].point;
                  var winPoints = $scope.nextLevel.filter(e => e == team.toUpperCase()).length * 2;
                  var startFromMatch = parseInt($scope.upcomingMatches[0].SlNo) + parseInt($scope.curMatchPos) + parseInt($scope.detailedLevel);
                  if (level > 1) {
                        var startValue = parseInt($scope.curMatchPos);
                        if (level == 2 && team.toUpperCase() == $scope.upcomingMatches[startValue].team1.toUpperCase())
                              winPoints = winPoints + 2;
                        if (level == 3 && team.toUpperCase() == $scope.upcomingMatches[startValue].team2.toUpperCase())
                              winPoints = winPoints + 2;
                  }

                  $scope.detailedPoint = $scope.detailedPoint + winPoints;

                  //alert(startFromMatch);
                  $scope.detailedRemaining = $scope.upcomingMatches.filter(e => e.SlNo >= startFromMatch && (e.team1 == team.toUpperCase() || e.team2 == team.toUpperCase())).length;
                  $scope.detPosAry = [];
                  $scope.detPosAry = Object.keys($scope.currentMatchDetail[team][pos][type]);
                  $scope.detPosAry.sort((a, b) => a - b);
                  //console.log(detPosAry);
            }

            $scope.sampleCount = 0;

            $scope.sampleWinObj = null;

            $scope.overwriteAry = {};
            $scope.overPos = 0;

            $scope.overwriteSample2 = function (pos, team1, team2) {
                  team1 = team1.toLowerCase();
                  team2 = team2.toLowerCase();
                  if ($scope.overwriteAry[pos]) {
                        $scope.sampleMatch[pos] = ($scope.overwriteAry[pos] == team1 ? team2 : team1);
                        $scope.overwriteAry[pos] = false;
                  }
                  else {
                        $scope.overwriteAry[pos] = ($scope.sampleMatch[pos] == team1 ? team2 : team1);
                        $scope.sampleMatch[pos] = $scope.overwriteAry[pos];

                  }

                  console.log('$scope.sampleMatch');
                  console.log($scope.sampleMatch);


                  var teamCur = '';

                  $scope.teamsObjSample = JSON.parse(JSON.stringify($scope.teamsObj));

                  if (!$scope.showWin) {
                        if ($scope.detailedLevelActual == 2) {
                              teamCur = $scope.upcomingMatches[$scope.curMatchPos].team1.toUpperCase();
                              $scope.teamsObjSample[teamCur].point = $scope.teamsObjSample[teamCur].point + 2;
                        }
                        else if ($scope.detailedLevelActual == 3) {
                              teamCur = $scope.upcomingMatches[$scope.curMatchPos].team2.toUpperCase();
                              $scope.teamsObjSample[teamCur].point = $scope.teamsObjSample[teamCur].point + 2;
                        }
                  }



                  var obkeys = Object.keys($scope.teamsObjSample);


                  for (var key1 = 0; key1 < obkeys.length; key1++) {
                        var key = obkeys[key1];
                        $scope.teamsObjSample[key].point = $scope.teamsObjSample[key].point + $scope.teamsObjSample[key].won;
                        $scope.teamsObjSample[key].won = 0;
                        $scope.teamsObjSample[key].lost = $scope.teamsObjSample[key].point;
                  }

                  for (var i = 0; i < $scope.sampleMatch.length; i++) {
                        var tName = $scope.sampleMatch[i].toString().toUpperCase();
                        if (tName.split('|').length > 1)
                  {
                        $scope.teamsObjSample[tName.split('|')[0]].won = $scope.teamsObjSample[tName.split('|')[0]].won + 1;
                        $scope.teamsObjSample[tName.split('|')[0]].lost = $scope.teamsObjSample[tName.split('|')[0]].lost + 1;
                        $scope.teamsObjSample[tName.split('|')[1]].won = $scope.teamsObjSample[tName.split('|')[1]].won + 1;
                        $scope.teamsObjSample[tName.split('|')[1]].lost = $scope.teamsObjSample[tName.split('|')[1]].lost + 1;
                  }
                  else
                  {
                        $scope.teamsObjSample[tName].won = $scope.teamsObjSample[tName].won + 2;
                        $scope.teamsObjSample[tName].lost = $scope.teamsObjSample[tName].lost + 2;

                  }
                  }

                  console.log($scope.teamsObjSample);

                  $scope.teamsObjSampleAry = Object.keys($scope.teamsObjSample);

                  $scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObj[b.toUpperCase()].runrate) - parseFloat($scope.teamsObj[a.toUpperCase()].runrate) : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));


                  var detPosRec = $scope.overPos - 1;
                  console.log($scope.teamsObjSampleAry[detPosRec]);
                  console.log($scope.detailedTeam);
                        
                  if (parseInt(detPosRec) < 11 &&
                        $scope.teamsObjSampleAry[detPosRec] && 
                        $scope.teamsObjSampleAry[detPosRec] != $scope.detailedTeam.toUpperCase() && 1 == 1)
                  {

                        var exisRunRate = $scope.teamsObjSample[$scope.teamsObjSampleAry[detPosRec].toUpperCase()].runrate;
                        console.log(exisRunRate);  
                        console.log($scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate);
                        $scope.teamsObjSample[$scope.teamsObjSampleAry[detPosRec].toUpperCase()].runrate = $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate;
                        $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate = exisRunRate; 
                        $scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObjSample[b.toUpperCase()].runrate) - parseFloat($scope.teamsObjSample[a.toUpperCase()].runrate) : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));
                  }
                  
            }

            $scope.overwriteSample = function (pos, team1, team2) {
                  team1 = team1.toLowerCase();
                  team2 = team2.toLowerCase();
                  if ($scope.overwriteAry[pos]) {
                        $scope.sampleMatch[pos] = ($scope.overwriteAry[pos] == team1 ? team2 : team1);
                        $scope.overwriteAry[pos] = false;
                  }
                  else {
                        $scope.overwriteAry[pos] = ($scope.sampleMatch[pos] == team1 ? team2 : team1);
                        $scope.sampleMatch[pos] = $scope.overwriteAry[pos];

                  }
                  console.log('$scope.sampleMatch');
                  console.log($scope.sampleMatch);

                  $scope.copycontent = $scope.sampleMatch.join("|");

                  var teamCur = '';

                  $scope.teamsObjSample = JSON.parse(JSON.stringify($scope.teamsObj));

                  if (!$scope.showWin) {
                        if ($scope.detailedLevelActual == 2) {
                              teamCur = $scope.upcomingMatches[$scope.curMatchPos].team1.toUpperCase();
                              $scope.teamsObjSample[teamCur].point = $scope.teamsObjSample[teamCur].point + 2;
                        }
                        else if ($scope.detailedLevelActual == 3) {
                              teamCur = $scope.upcomingMatches[$scope.curMatchPos].team2.toUpperCase();
                              $scope.teamsObjSample[teamCur].point = $scope.teamsObjSample[teamCur].point + 2;
                        }
                  }



                  var obkeys = Object.keys($scope.teamsObjSample);


                  for (var key1 = 0; key1 < obkeys.length; key1++) {
                        var key = obkeys[key1];
                        $scope.teamsObjSample[key].point = $scope.teamsObjSample[key].point + $scope.teamsObjSample[key].won;
                        $scope.teamsObjSample[key].won = 0;
                        $scope.teamsObjSample[key].lost = $scope.teamsObjSample[key].point;
                  }

                  for (var i = 0; i < $scope.sampleMatch.length; i++) {
                        var tName = $scope.sampleMatch[i].toString().toUpperCase();

                                                if (tName.split('|').length > 1)
                  {
                        $scope.teamsObjSample[tName.split('|')[0]].won = $scope.teamsObjSample[tName.split('|')[0]].won + 1;
                        $scope.teamsObjSample[tName.split('|')[0]].lost = $scope.teamsObjSample[tName.split('|')[0]].lost + 1;
                        $scope.teamsObjSample[tName.split('|')[1]].won = $scope.teamsObjSample[tName.split('|')[1]].won + 1;
                        $scope.teamsObjSample[tName.split('|')[1]].lost = $scope.teamsObjSample[tName.split('|')[1]].lost + 1;
                  }
                  else
                  {
                        $scope.teamsObjSample[tName].won = $scope.teamsObjSample[tName].won + 2;
                        $scope.teamsObjSample[tName].lost = $scope.teamsObjSample[tName].lost + 2;
                  }
            }

                  console.log($scope.teamsObjSample);

                  $scope.teamsObjSampleAry = Object.keys($scope.teamsObjSample);

                  $scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObj[b.toUpperCase()].runrate) - parseFloat($scope.teamsObj[a.toUpperCase()].runrate) : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));

                  $scope.detPosPoint = $scope.teamsObjSample[$scope.winTeam.toUpperCase()].point + $scope.teamsObjSample[$scope.winTeam.toUpperCase()].won;

                  var detPosRec = $scope.overPos - 1;
                  console.log($scope.teamsObjSampleAry[detPosRec]);
                  console.log($scope.detailedTeam);
                        
                  if (parseInt(detPosRec) < 11 &&
                        $scope.teamsObjSampleAry[detPosRec] && 
                        $scope.teamsObjSampleAry[detPosRec] != $scope.detailedTeam.toUpperCase() && 1 == 1)
                  {

                        var exisRunRate = $scope.teamsObjSample[$scope.teamsObjSampleAry[detPosRec].toUpperCase()].runrate;
                        console.log(exisRunRate);  
                        console.log($scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate);
                        $scope.teamsObjSample[$scope.teamsObjSampleAry[detPosRec].toUpperCase()].runrate = $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate;
                        $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate = exisRunRate; 
                        $scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObjSample[b.toUpperCase()].runrate) - parseFloat($scope.teamsObjSample[a.toUpperCase()].runrate) : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));
                  }
                  
            }


            $scope.selectDetailViewSampleWinNew = function (pos, count, objS) {
                  
                  console.log('sampledetailwinnew');
                  //if (count == -1 || count > $scope.sampleCount)
                   //     return;

                  $scope.overwriteAry = {};



                  /*
                  if (objS) {
                        $scope.sampleWinObj = JSON.parse(JSON.stringify(objS));
                  }
                  else if ($scope.sampleWinObj) {
                        objS = JSON.parse(JSON.stringify($scope.sampleWinObj));
                  }
                  */


                   var sampleMatch;

                  sampleMatch = ',' + $scope.upcomingMatches.map(e => e.team1).join(',');
                 
                  sampleMatch = sampleMatch.toLowerCase();

                  $scope.detailedViewSample = true;
                  $scope.showWin = false;
                  $scope.fromShowWin = true;
                  $scope.sampleMatch = sampleMatch.substring(1).split(',');

                  //$scope.teamsObjSample = JSON.parse(JSON.stringify($scope.teamsObjRoot));

                  $scope.teamsObjSample = JSON.parse(JSON.stringify($scope.teamsObj));


                  /*
                  var teamCur = '';
                  if ($scope.detailedLevelActual == 2) {
                        teamCur = $scope.upcomingMatches[$scope.curMatchPos].team1.toUpperCase();
                        $scope.teamsObjSample[teamCur].point = $scope.teamsObjSample[teamCur].point + 2;
                  }
                  else if ($scope.detailedLevelActual == 3) {
                        teamCur = $scope.upcomingMatches[$scope.curMatchPos].team2.toUpperCase();
                        $scope.teamsObjSample[teamCur].point = $scope.teamsObjSample[teamCur].point + 2;
                  }
                  */



                  var obkeys = Object.keys($scope.teamsObjSample);


                  for (var key1 = 0; key1 < obkeys.length; key1++) {
                        var key = obkeys[key1];
                        $scope.teamsObjSample[key].point = $scope.teamsObjSample[key].point + $scope.teamsObjSample[key].won;
                        $scope.teamsObjSample[key].won = 0;
                        $scope.teamsObjSample[key].lost = $scope.teamsObjSample[key].point;
                  }

                  for (var i = 0; i < $scope.sampleMatch.length; i++) {
                        var tName = $scope.sampleMatch[i].toString().toUpperCase();
                                                if (tName.split('|').length > 1)
                  {
                        $scope.teamsObjSample[tName.split('|')[0]].won = $scope.teamsObjSample[tName.split('|')[0]].won + 1;
                        $scope.teamsObjSample[tName.split('|')[0]].lost = $scope.teamsObjSample[tName.split('|')[0]].lost + 1;
                        $scope.teamsObjSample[tName.split('|')[1]].won = $scope.teamsObjSample[tName.split('|')[1]].won + 1;
                        $scope.teamsObjSample[tName.split('|')[1]].lost = $scope.teamsObjSample[tName.split('|')[1]].lost + 1;
                  }
                  else
                  {

                        $scope.teamsObjSample[tName].won = $scope.teamsObjSample[tName].won + 2;
                        $scope.teamsObjSample[tName].lost = $scope.teamsObjSample[tName].lost + 2;
                  }
                              }
                                                console.log('$scope.teamsObjSample');

                  console.log($scope.teamsObjSample);

                  $scope.detailedTeam = $scope.winTeam.toUpperCase();
                  $scope.teamsObjSampleAry = Object.keys($scope.teamsObjSample);

                  $scope.teamsObjSampleAry.sort((a, b) => ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost));
                  $scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObj[b.toUpperCase()].runrate) - parseFloat($scope.teamsObj[a.toUpperCase()].runrate) : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));

                  //$scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObj[b.toUpperCase()].runrate) - parseFloat($scope.teamsObj[a.toUpperCase()].runrate)  : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));


                  console.log('$scope.teamsObjSampleAry');
                  console.log($scope.teamsObjSampleAry);
                  $scope.overPos = pos;
                  var detPosRec = pos - 1;
                  console.log($scope.teamsObjSampleAry[detPosRec]);
                  console.log($scope.detailedTeam);
                  console.log(pos);

                  $scope.detPosPoint = $scope.teamsObjSample[$scope.winTeam.toUpperCase()].currentPoint + $scope.teamsObjSample[$scope.winTeam.toUpperCase()].won;
                   
                  if (parseInt(pos) < 11 &&
                        $scope.teamsObjSampleAry[detPosRec] && 
                        $scope.teamsObjSampleAry[detPosRec] != $scope.detailedTeam.toUpperCase() && 1 == 1)
                  {

                        var exisRunRate = $scope.teamsObjSample[$scope.teamsObjSampleAry[detPosRec].toUpperCase()].runrate;
                        console.log(exisRunRate);  
                        console.log($scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate);
                        $scope.teamsObjSample[$scope.teamsObjSampleAry[detPosRec].toUpperCase()].runrate = $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate;
                        $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate = exisRunRate; 
                        $scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObjSample[b.toUpperCase()].runrate) - parseFloat($scope.teamsObjSample[a.toUpperCase()].runrate) : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));
                  }

                  $scope.slice1value = Math.ceil($scope.upcomingMatches.slice($scope.curMatchPos + ($scope.fromShowWin ? 0 : $scope.detailedLevel)).length/2);

                  $scope.slice3value = Math.ceil($scope.upcomingMatches.slice($scope.curMatchPos + ($scope.fromShowWin ? 0 : $scope.detailedLevel)).length/3);
            }




            
            $scope.selectDetailViewSampleWin = function (pos, count, objS) {
                  if (count == -1 || count > $scope.sampleCount)
                        return;

                  $scope.overwriteAry = {};


                  if (objS) {
                        $scope.sampleWinObj = JSON.parse(JSON.stringify(objS));
                  }
                  else if ($scope.sampleWinObj) {
                        objS = JSON.parse(JSON.stringify($scope.sampleWinObj));
                  }

                  var sampleMatch;
                  if (!count) {
                        $scope.detPosPoint = pos;
                        //$scope.detailedWin[$scope.winTeam][$scope.winNumber * 2]
                        //console.log($scope.currentMatchDetail[$scope.detailedTeam][$scope.detailedPos][$scope.detailedType][pos]);
                        sampleMatch = objS.Match[0];
                        $scope.sampleCount = objS.Match.length;
                        $scope.samplePosition = 1;
                  }
                  else {
                        sampleMatch = objS.Match[count - 1];
                        $scope.samplePosition = count;
                  }

                  $scope.detailedViewSample = true;
                  $scope.showWin = false;
                  $scope.fromShowWin = true;
                  $scope.sampleMatch = sampleMatch.substring(1).split(',');

                  //$scope.teamsObjSample = JSON.parse(JSON.stringify($scope.teamsObjRoot));

                  $scope.teamsObjSample = JSON.parse(JSON.stringify($scope.teamsObj));


                  /*
                  var teamCur = '';
                  if ($scope.detailedLevelActual == 2) {
                        teamCur = $scope.upcomingMatches[$scope.curMatchPos].team1.toUpperCase();
                        $scope.teamsObjSample[teamCur].point = $scope.teamsObjSample[teamCur].point + 2;
                  }
                  else if ($scope.detailedLevelActual == 3) {
                        teamCur = $scope.upcomingMatches[$scope.curMatchPos].team2.toUpperCase();
                        $scope.teamsObjSample[teamCur].point = $scope.teamsObjSample[teamCur].point + 2;
                  }
                  */



                  var obkeys = Object.keys($scope.teamsObjSample)


                  for (var key1 = 0; key1 < obkeys.length; key1++) {
                        var key = obkeys[key1];
                        $scope.teamsObjSample[key].point = $scope.teamsObjSample[key].point + $scope.teamsObjSample[key].won;
                        $scope.teamsObjSample[key].won = 0;
                        $scope.teamsObjSample[key].lost = $scope.teamsObjSample[key].point;
                  }

                  for (var i = 0; i < $scope.sampleMatch.length; i++) {
                        var tName = $scope.sampleMatch[i].toString().toUpperCase();
                                                if (tName.split('|').length > 1)
                  {
                        $scope.teamsObjSample[tName.split('|')[0]].won = $scope.teamsObjSample[tName.split('|')[0]].won + 1;
                        $scope.teamsObjSample[tName.split('|')[0]].lost = $scope.teamsObjSample[tName.split('|')[0]].lost + 1;
                        $scope.teamsObjSample[tName.split('|')[1]].won = $scope.teamsObjSample[tName.split('|')[1]].won + 1;
                        $scope.teamsObjSample[tName.split('|')[1]].lost = $scope.teamsObjSample[tName.split('|')[1]].lost + 1;
                  }
                  else
                  {

                        $scope.teamsObjSample[tName].won = $scope.teamsObjSample[tName].won + 2;
                        $scope.teamsObjSample[tName].lost = $scope.teamsObjSample[tName].lost + 2;
                  }
                              }
                                                console.log('$scope.teamsObjSample');

                  console.log($scope.teamsObjSample);

                  $scope.detPosPoint = $scope.teamsObjSample[$scope.winTeam.toUpperCase()].point + $scope.teamsObjSample[$scope.winTeam.toUpperCase()].won;
                  $scope.detailedTeam = $scope.winTeam.toUpperCase();
                  $scope.teamsObjSampleAry = Object.keys($scope.teamsObjSample);

                  $scope.teamsObjSampleAry.sort((a, b) => ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost));
                  $scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObj[b.toUpperCase()].runrate) - parseFloat($scope.teamsObj[a.toUpperCase()].runrate) : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));

                  //$scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObj[b.toUpperCase()].runrate) - parseFloat($scope.teamsObj[a.toUpperCase()].runrate)  : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));


                  console.log('$scope.teamsObjSampleAry');
                  console.log($scope.teamsObjSampleAry);
                  $scope.overPos = pos;
                  var detPosRec = pos - 1;
                  console.log($scope.teamsObjSampleAry[detPosRec]);
                  console.log($scope.detailedTeam);
                  console.log(pos);

                  if (parseInt(pos) < 11 &&
                        $scope.teamsObjSampleAry[detPosRec] && 
                        $scope.teamsObjSampleAry[detPosRec] != $scope.detailedTeam.toUpperCase() && 1 == 1)
                  {

                        var exisRunRate = $scope.teamsObjSample[$scope.teamsObjSampleAry[detPosRec].toUpperCase()].runrate;
                        console.log(exisRunRate);  
                        console.log($scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate);
                        $scope.teamsObjSample[$scope.teamsObjSampleAry[detPosRec].toUpperCase()].runrate = $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate;
                        $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate = exisRunRate; 
                        $scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObjSample[b.toUpperCase()].runrate) - parseFloat($scope.teamsObjSample[a.toUpperCase()].runrate) : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));
                  }

                  $scope.slice1value = Math.ceil($scope.upcomingMatches.slice($scope.curMatchPos + ($scope.fromShowWin ? 0 : $scope.detailedLevel)).length/2);

                  $scope.slice3value = Math.ceil($scope.upcomingMatches.slice($scope.curMatchPos + ($scope.fromShowWin ? 0 : $scope.detailedLevel)).length/3);
            }


            $scope.selectDetailViewSample = function (pos, count) {
                  if (count == -1 || count > $scope.sampleCount)
                        return;
                  
                  
                   var sampleMatch;
                  if (!count) {
                        $scope.detPosPoint = pos;
                        //console.log($scope.currentMatchDetail[$scope.detailedTeam][$scope.detailedPos][$scope.detailedType][pos]);
                        sampleMatch = $scope.currentMatchDetail[$scope.detailedTeam][$scope.detailedPos][$scope.detailedType][pos].Match[0];
                        $scope.sampleCount = $scope.currentMatchDetail[$scope.detailedTeam][$scope.detailedPos][$scope.detailedType][pos].Match.length;
                        $scope.samplePosition = 1;
                  }
                  else {
                        sampleMatch = $scope.currentMatchDetail[$scope.detailedTeam][$scope.detailedPos][$scope.detailedType][pos].Match[count - 1];
                        $scope.samplePosition = count;
                  }

                  $scope.overwriteAry = {};

                  console.log('comes here .....')
                  $scope.fromShowWin = false;
                  $scope.detailedViewSample = true;
                  $scope.sampleMatch = sampleMatch.substring(1).split(',');

                  $scope.teamsObjSample = JSON.parse(JSON.stringify($scope.teamsObj));


                  var teamCur = '';
                  /*
                  if ($scope.detailedLevelActual == 2) {
                        teamCur = $scope.upcomingMatches[$scope.curMatchPos].team1.toUpperCase();
                        $scope.teamsObjSample[teamCur].point = $scope.teamsObjSample[teamCur].point + 2;
                  }
                  else if ($scope.detailedLevelActual == 3) {
                        teamCur = $scope.upcomingMatches[$scope.curMatchPos].team2.toUpperCase();
                        $scope.teamsObjSample[teamCur].point = $scope.teamsObjSample[teamCur].point + 2;
                  }
                  */



                  var obkeys = Object.keys($scope.teamsObjSample)


                  for (var key1 = 0; key1 < obkeys.length; key1++) {
                        var key = obkeys[key1];
                        $scope.teamsObjSample[key].point = $scope.teamsObjSample[key].point + $scope.teamsObjSample[key].won;
                        $scope.teamsObjSample[key].won = 0;
                        $scope.teamsObjSample[key].lost = $scope.teamsObjSample[key].point;
                  }

                  for (var i = 0; i < $scope.sampleMatch.length; i++) {
                        var tName = $scope.sampleMatch[i].toString().toUpperCase();
                        if (tName.split('|').length > 1)
                  {
                        $scope.teamsObjSample[tName.split('|')[0]].won = $scope.teamsObjSample[tName.split('|')[0]].won + 1;
                        $scope.teamsObjSample[tName.split('|')[0]].lost = $scope.teamsObjSample[tName.split('|')[0]].lost + 1;
                        $scope.teamsObjSample[tName.split('|')[1]].won = $scope.teamsObjSample[tName.split('|')[1]].won + 1;
                        $scope.teamsObjSample[tName.split('|')[1]].lost = $scope.teamsObjSample[tName.split('|')[1]].lost + 1;
                  }
                  else
                  {
                        $scope.teamsObjSample[tName].won = $scope.teamsObjSample[tName].won + 2;
                        $scope.teamsObjSample[tName].lost = $scope.teamsObjSample[tName].lost + 2;
                  }
                  }
                  console.log($scope.teamsObjSample);

                  $scope.teamsObjSampleAry = Object.keys($scope.teamsObjSample);

                  $scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObj[b.toUpperCase()].runrate) - parseFloat($scope.teamsObj[a.toUpperCase()].runrate) : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));
                        console.log($scope.teamsObjSampleAry);
                        console.log(pos);
                        console.log($scope.samplePosition);
                        console.log(count);
                        $scope.overPos = $scope.detailedPos;
                        var detPosRec = $scope.detailedPos - 1;
                        console.log($scope.teamsObjSampleAry[detPosRec]);
                        console.log($scope.detailedTeam);
                        
                  if (parseInt($scope.detailedPos) < 11 &&
                        $scope.teamsObjSampleAry[detPosRec] && 
                        $scope.teamsObjSampleAry[detPosRec] != $scope.detailedTeam.toUpperCase() && 1 == 1)
                  {

                        var exisRunRate = $scope.teamsObjSample[$scope.teamsObjSampleAry[detPosRec].toUpperCase()].runrate;
                        console.log(exisRunRate);  
                        console.log($scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate);
                        $scope.teamsObjSample[$scope.teamsObjSampleAry[detPosRec].toUpperCase()].runrate = $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate;
                        $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate = exisRunRate; 
                        $scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObjSample[b.toUpperCase()].runrate) - parseFloat($scope.teamsObjSample[a.toUpperCase()].runrate) : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));
                  }

                  $scope.slice1value = Math.ceil($scope.upcomingMatches.slice($scope.curMatchPos + ($scope.fromShowWin ? 0 : $scope.detailedLevel)).length/2);


            }





            $scope.selectDetailViewSampleNew = function (pos, count) {
                  var sampleMatch;


                  sampleMatch = $scope.upcomingMatches.map(e => e.team1).join(',');
                  $scope.overwriteAry = {};

                  console.log('comes here 111 .....')
                  $scope.fromShowWin = false;
                  $scope.detailedViewSample = true;
                  $scope.sampleMatch = sampleMatch.substring(1).split(',');

                  $scope.teamsObjSample = JSON.parse(JSON.stringify($scope.teamsObj));


                  var teamCur = '';
                  if ($scope.detailedLevelActual == 2) {
                        teamCur = $scope.upcomingMatches[$scope.curMatchPos].team1.toUpperCase();
                        $scope.teamsObjSample[teamCur].point = $scope.teamsObjSample[teamCur].point + 2;
                  }
                  else if ($scope.detailedLevelActual == 3) {
                        teamCur = $scope.upcomingMatches[$scope.curMatchPos].team2.toUpperCase();
                        $scope.teamsObjSample[teamCur].point = $scope.teamsObjSample[teamCur].point + 2;
                  }



                  var obkeys = Object.keys($scope.teamsObjSample)


                  for (var key1 = 0; key1 < obkeys.length; key1++) {
                        var key = obkeys[key1];
                        $scope.teamsObjSample[key].point = $scope.teamsObjSample[key].point + $scope.teamsObjSample[key].won;
                        $scope.teamsObjSample[key].won = 0;
                        $scope.teamsObjSample[key].lost = $scope.teamsObjSample[key].point;
                  }

                  for (var i = 0; i < $scope.sampleMatch.length; i++) {
                        var tName = $scope.sampleMatch[i].toString().toUpperCase();
                        if (tName.split('|').length > 1)
                  {
                        $scope.teamsObjSample[tName.split('|')[0]].won = $scope.teamsObjSample[tName.split('|')[0]].won + 1;
                        $scope.teamsObjSample[tName.split('|')[0]].lost = $scope.teamsObjSample[tName.split('|')[0]].lost + 1;
                        $scope.teamsObjSample[tName.split('|')[1]].won = $scope.teamsObjSample[tName.split('|')[1]].won + 1;
                        $scope.teamsObjSample[tName.split('|')[1]].lost = $scope.teamsObjSample[tName.split('|')[1]].lost + 1;
                  }
                  else
                  {
                        $scope.teamsObjSample[tName].won = $scope.teamsObjSample[tName].won + 2;
                        $scope.teamsObjSample[tName].lost = $scope.teamsObjSample[tName].lost + 2;
                  }
            }
                  console.log($scope.teamsObjSample);

                  $scope.teamsObjSampleAry = Object.keys($scope.teamsObjSample);
                  //if ($scope.detailedLevel > 0)
                  //      $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].point = $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].point + 2; 
                  //$scope.sampleMatch.reverse();

                  //$scope.teamsObjSampleAry.sort((a,b) => ($scope.teamsObjSample[b].point + $scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].point + $scope.teamsObjSample[a].lost));
                  //$scope.teamsObjSampleAry.sort((a, b) => ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost));

                  $scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObj[b.toUpperCase()].runrate) - parseFloat($scope.teamsObj[a.toUpperCase()].runrate) : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));
                        console.log($scope.teamsObjSampleAry);
                        console.log(pos);
                        console.log($scope.samplePosition);
                        console.log(count);
                        $scope.overPos = $scope.detailedPos;
                        var detPosRec = $scope.detailedPos - 1;
                        console.log($scope.teamsObjSampleAry[detPosRec]);
                        console.log($scope.detailedTeam);
                        
                  if (parseInt($scope.detailedPos) < 11 &&
                        $scope.teamsObjSampleAry[detPosRec] && 
                        $scope.teamsObjSampleAry[detPosRec] != $scope.detailedTeam.toUpperCase() && 1 == 1)
                  {

                        var exisRunRate = $scope.teamsObjSample[$scope.teamsObjSampleAry[detPosRec].toUpperCase()].runrate;
                        console.log(exisRunRate);  
                        console.log($scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate);
                        $scope.teamsObjSample[$scope.teamsObjSampleAry[detPosRec].toUpperCase()].runrate = $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate;
                        $scope.teamsObjSample[$scope.detailedTeam.toUpperCase()].runrate = exisRunRate; 
                        $scope.teamsObjSampleAry.sort((a, b) => (($scope.teamsObjSample[b].lost) == ($scope.teamsObjSample[a].lost) ? parseFloat($scope.teamsObjSample[b.toUpperCase()].runrate) - parseFloat($scope.teamsObjSample[a.toUpperCase()].runrate) : ($scope.teamsObjSample[b].lost) - ($scope.teamsObjSample[a].lost)));
                  }

                  $scope.slice1value = Math.ceil($scope.upcomingMatches.slice($scope.curMatchPos + ($scope.fromShowWin ? 0 : $scope.detailedLevel)).length/2);


            }



            $scope.hideDetailViewSample = function (showWin) {
                  $scope.detailedViewSample = false;
                  if ($scope.fromShowWin) {
                        $scope.showWin = true;
                        $scope.fromShowWin = false;
                  }


            }
            $scope.highlightteam = "";
            $scope.highlightteamselected = function(selteam)
            {
                  if ($scope.highlightteam == selteam)
                  {
                      $scope.highlightteam = "";        
                  }
                  else
                  {
                        $scope.highlightteam = selteam;
                  }

            }

            $scope.positionVisible = [1, 2];
            $scope.currentMatch = 0;
      });
</script>

<div ng-app="myShoppingList" ng-controller="myCtrl" class="container">
      <div ng-class="loading ? 'loader' : ''"></div>
      <p class="text-primary" style="
text-align: center;
padding-top: 0px;
/* padding-bottom: 5px; */
font-size: 21px;
font-family: Calibri;
color: cornflowerblue;
margin-bottom: 0px;
">ODI World Cup 2023 - Point Calculator</p>
      <p class="text-secondary" style="
text-align: center;
/* padding-top: 20px; */
/* padding-bottom: 5px; */
font-size: 13px;
font-family: Calibri;
/* color: cornflowerblue; */
">Calculates points and position for each team based on all possible outcome of the series from now. <a href="sample.html" target="_blank">more details</a>
      </p>
      <div class="row" style="border-radius: 10px;border: 1px solid #337ab7;padding-top: 10px;padding-bottom: 10px;">
            <span style="
/* background-color: white; */
margin: -20px 0px 0px 10px;
display: block;
"><span style="padding:0px 5px 0px 5px;
background-color: white;
">Points as of today</span></span>
            <div ng-repeat="obj in teamsNew" class="innerTeam">
                  <span class="spanTeamNameHeader" ng-click="highlightteamselected(obj.name)" >{{obj.name}}</span>
                  <div style="
display: inline-block;
border: 1px solid #337ab7;
border-radius: 5px;
padding: 0px 4px 0px 4px;
background: linear-gradient(110deg, #d9edf7 40%, #ffed4b8f  30%);
width: 70px;">

                        <span class="ng-binding" style="
display: inline-block;
width: 25%;
text-align: center;
">{{obj.point}}</span><span class="ng-binding" style="
display: inline-block;
width: 75%;font-size:12px;
text-align: right;
">{{obj.runrate}}
<!--
{{teamsObj[obj.name].point + teamsObj[obj.name].won + teamsObj[obj.name].lost}}
-->                   
                  </span></div>
            </div>
            <div style="display:inline-block;padding-left:10px;font-size:10px">
                  <span class="glyphicon glyphicon-unchecked" style="border: 1px solid #337ab7;color:#d9edf7;background-color:#d9edf7;border-radius:3px"></span>&nbsp;
                  Current Points &nbsp;&nbsp;
                  <span class="glyphicon glyphicon-unchecked" style="border: 1px solid #337ab7;color:#ffed4b8f;background-color:#ffed4b8f;border-radius:3px"></span>&nbsp;Run
                  Rate
            </div>
      </div>
<br>


      <div class="row" ng-if="detailedViewSample">
            <div class="col-sm-12" style="border: 1px solid darkred;border-radius: 5px;padding: 0px;">

                  <table ng-if="!twoColumnLayout">
                        <tr style="vertical-align: top;">
                        <td>
                  <table class="table  table-striped">
                        <thead>
                              <tr>
                                    <th>
                                          Match & Winner
                                    </th>
                              </tr>
                        </thead>
                        <tbody>
                              <tr ng-repeat="next in upcomingMatches.slice(curMatchPos + (fromShowWin ? 0 : detailedLevel)).slice(0,slice3value) track by $index">
                                    <th ng-click="overwriteSample($index,next.team1,next.team2)" ng-style="overwriteAry[$index] && {'color': 'navy'} ||  {'color': 'black'}">
                                          <span ng-class="highlightteam == sampleMatch[$index].toString().toUpperCase() ? 'highlightteam' : ''" >{{next.SlNo + ", " + sampleMatch[$index].toString().toUpperCase()}}</span>
                                          <span style="font-size: 11px;font-weight: 600;" 
                                          ng-class="highlightteam == (next.team1.toString().toLowerCase() == sampleMatch[$index] ? next.team2 : next.team1) ? 'highlightteam' : ''"> 
                                          vs {{(next.team1.toString().toLowerCase() == sampleMatch[$index] ? next.team2 : next.team1)}}  </span>
                                          
                                    </th>
                              </tr>
                        </tbody>
                  </table>

                        </td>            

                        <td style="
    padding-left: 5px;
">
                  <table class="table  table-striped">
                        <thead>
                              <tr>
                                    <th>
                                          Match & Winner
                                    </th>
                              </tr>
                        </thead>
                        <tbody>
                              <tr ng-repeat="next in upcomingMatches.slice(curMatchPos + (fromShowWin ? 0 : detailedLevel)).slice(slice3value,(slice3value * 2)) track by $index">
                                    <th ng-click="overwriteSample($index + slice3value,next.team1,next.team2)" ng-style="overwriteAry[$index + slice3value] && {'color': 'navy'} ||  {'color': 'black'}">
                                          <span ng-class="highlightteam == sampleMatch[$index+ slice3value].toString().toUpperCase() ? 'highlightteam' : ''" >{{next.SlNo + ", " + sampleMatch[$index + slice3value].toString().toUpperCase()}}</span> <span style="font-size: 11px;font-weight: 600;" ng-class="highlightteam == (next.team1.toString().toLowerCase() == sampleMatch[$index + slice3value] ? next.team2 : next.team1) ? 'highlightteam' : ''"> vs {{(next.team1.toString().toLowerCase() == sampleMatch[$index + slice3value] ? next.team2 : next.team1)}}  </span>
                                    </th>
                              </tr>
                        </tbody>
                  </table>
                        </td>
                  <td style="
                  padding-left: 5px;
              ">
                                <table class="table  table-striped">
                        <thead>
                              <tr>
                                    <th>
                                          Match & Winner
                                    </th>
                              </tr>
                        </thead>
                        <tbody>
                              <tr ng-repeat="next in upcomingMatches.slice(curMatchPos + (fromShowWin ? 0 : detailedLevel)).slice(slice3value * 2,(slice3value * 3) + 1) track by $index">
                                    <th ng-click="overwriteSample($index + (slice3value * 2),next.team1,next.team2)" ng-style="overwriteAry[$index + (slice3value * 2)] && {'color': 'navy'} ||  {'color': 'black'}">
                                          <span ng-class="highlightteam == sampleMatch[$index + (slice3value * 2)].toString().toUpperCase() ? 'highlightteam' : ''" >{{next.SlNo + ", " + sampleMatch[$index + (slice3value * 2)].toString().toUpperCase()}}</span> <span style="font-size: 11px;font-weight: 600;" ng-class="highlightteam == (next.team1.toString().toLowerCase() == sampleMatch[$index+ (slice3value * 2)] ? next.team2 : next.team1) ? 'highlightteam' : ''"> vs {{(next.team1.toString().toLowerCase() == sampleMatch[$index+ (slice3value * 2)] ? next.team2 : next.team1)}}  </span>
                                    </th>
                              </tr>
                        </tbody>
                  </table>

                        </td>            
                        </tr>
                  </table>
                                    <table ng-if="twoColumnLayout">
                        <tr style="vertical-align: top;">
                        <td>
                  <table class="table  table-striped">
                        <thead>
                              <tr>
                                    <th>
                                          Match
                                    </th>
                                    <th>
                                          Winner
                                    </th>
                              </tr>
                        </thead>
                        <tbody>
                              <tr ng-repeat="next in upcomingMatches.slice(curMatchPos + (fromShowWin ? 0 : detailedLevel)).slice(0,slice1value) track by $index">
                                    <th ng-click="overwriteSample($index,next.team1,next.team2)" ng-style="overwriteAry[$index] && {'color': 'navy'} ||  {'color': 'black'}">
                                          {{next.SlNo + ", " + next.date.substring(0,6) + " " }}
                                    </th>
                                    <th>
                                          <span ng-class="highlightteam == sampleMatch[$index].toString().toUpperCase() ? 'highlightteam' : ''" >{{sampleMatch[$index].toString().toUpperCase()}}</span> <span style="font-size: 11px;font-weight: 600;" ng-class="highlightteam == (next.team1.toString().toLowerCase() == sampleMatch[$index] ? next.team2 : next.team1) ? 'highlightteam' : ''"> vs {{(next.team1.toString().toLowerCase() == sampleMatch[$index] ? next.team2 : next.team1)}}  </span>
                                    </th>
                              </tr>
                        </tbody>
                  </table>

                        </td>            

                        <td style="
    padding-left: 5px;
">
                  <table class="table  table-striped">
                        <thead>
                              <tr>
                                    <th>
                                          Match
                                    </th>
                                    <th>
                                          Winner
                                    </th>
                              </tr>
                        </thead>
                        <tbody>
                              <tr ng-repeat="next in upcomingMatches.slice(curMatchPos + (fromShowWin ? 0 : detailedLevel)).slice(slice1value) track by $index">
                                    <th ng-click="overwriteSample($index  + slice1value,next.team1,next.team2)" ng-style="overwriteAry[$index + slice1value] && {'color': 'navy'} ||  {'color': 'black'}">
                                          {{next.SlNo + ", " + next.date.substring(0,6) + " " }}
                                    </th>
                                    <th>
                                          <!--{{sampleMatch[$index + slice1value].toString().toUpperCase()}} <span style="font-size: 12px;font-weight: 100;"> vs {{(next.team1.toString().toLowerCase() == sampleMatch[$index + slice1value] ? next.team2 : next.team1)}}  </span>-->
                                          <span ng-class="highlightteam == sampleMatch[$index  + slice1value].toString().toUpperCase() ? 'highlightteam' : ''" >{{sampleMatch[$index + slice1value].toString().toUpperCase()}}</span> <span style="font-size: 11px;font-weight: 600;" ng-class="highlightteam == (next.team1.toString().toLowerCase() == sampleMatch[$index + slice1value] ? next.team2 : next.team1) ? 'highlightteam' : ''"> vs {{(next.team1.toString().toLowerCase() == sampleMatch[$index + slice1value] ? next.team2 : next.team1)}}  </span>
                                    </th>
                              </tr>
                        </tbody>
                  </table>

                        </td>            
                        </tr>
                  </table>
                  <div ng-repeat="obj in teamsObjSampleAry" class="innerTeam" ng-class="((teamsObjSample[obj].point + teamsObjSample[obj].won) == detPosPoint ? 'innerTeamActive' : '')"  ng-click="highlightteamselected(obj)">
                        <span class="spanTeamNameHeader" ng-class="(detailedTeam.toUpperCase() == obj ? 'spanTeamNameHeaderActive' : '')">{{obj}}</span>
                        <div style="
display: inline-block;
border: 1px solid #337ab7;
border-radius: 5px;
padding: 0px 5px 0px 5px;
background: linear-gradient(110deg, #d9edf7 100%);
width: 30px;
"><span class="ng-binding" style="
display: inline-block;
width: 50%;
text-align: center;
">{{teamsObjSample[obj].point + teamsObjSample[obj].won}}
</span></div>
                  </div>


<table class="table  table-striped" ng-if="1 == 2">
                        <thead>
                              <tr>
                                    <th>
                                          Match Details
                                    </th>
                                    <th>
                                          Winner
                                    </th>
                                    <th>
                                    </th>

                              </tr>
                        </thead>
                        <tbody>
                              <tr ng-repeat="next in upcomingMatches.slice(curMatchPos + (fromShowWin ? 0 : detailedLevel)) track by $index">
                                    <th>
                                          Match : {{next.SlNo + " - " + next.date + " " }}
                                    </th>
                                    <th>
                                          {{sampleMatch[$index].toString().toUpperCase()}} <span style="font-size: 12px;font-weight: 100;"> vs {{(next.team1.toString().toLowerCase() == sampleMatch[$index] ? next.team2 : next.team1)}}  </span>
                                    </th>
                                    <th>
                                          <div style="height:25px;width:25px;background-size: contain;background-repeat: no-repeat;" ng-style="overwriteAry[$index] && {'background-image': 'url(1.png)'} ||  {'background-image': 'url(2.png)'}"
                                                ng-click="overwriteSample($index,next.team1,next.team2)"></div>
                                    </th>
                              </tr>
                        </tbody>
                  </table>

                  </div>      

<br>
<br>
<br>
                  <input id="myInput"  type="text" value="{{copycontent}}" style="display: none;">
                  <button ng-click="myFunction()">Copy text</button>
                                                      

            </div>
      </div>

      <br>

      <br>


      <div style="margin-left: -15px;margin-right: -15px;">
            Disclaimer: Thanks for visiting the site. Above information provided is for illustration purpose only. IPLCalc.com is not
            responsible for any error in the above data presentated. Please provide your suggessions/issues/feedback
            to iplcalc@gmail.com. Please <a href="sample.html" target="_blank">click here</a> for more details about IPLCalc.com
            <span ng-if="textFooter[0]">{{textFooter[0]}}</span><a ng-if="linkFooter[0].link" target="_blank" href="{{linkFooter[0].link}}">{{linkFooter[0].text}}</a>
            <span ng-if="textFooter[1]">{{textFooter[1]}}</span><a ng-if="linkFooter[1].link" target="_blank" href="{{linkFooter[1].link}}">{{linkFooter[1].text}}</a>
            <span ng-if="textFooter[2]">{{textFooter[2]}}</span><a ng-if="linkFooter[2].link" target="_blank" href="{{linkFooter[2].link}}">{{linkFooter[2].text}}</a>
            <span ng-if="textFooter[3]">{{textFooter[3]}}</span><a ng-if="linkFooter[3].link" target="_blank" href="{{linkFooter[3].link}}">{{linkFooter[3].text}}</a>
      </div>


      <footer class="bg-info text-center text-lg-start fixed-bottom" style="margin-left: -15px;margin-right: -15px;">
            <!-- Copyright -->
            <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);text-align:left;padding-left:10px">
                  © 2023 Copyright
                  <a class="text-dark" style="text-align:right;float: right;padding-right: 10px;" href="mailto:iplcalc@gmail.com">Contact Us at iplcalc@gmail.com</a>
            </div>
            <!-- Copyright -->
      </footer>

</div>

</body>
<style>


.highlightteam {
      color:red;
}      
.isDisabled {
      cursor: not-allowed;
      opacity: 0.5;
}

.isDisabled>a {
      color: currentColor;
      display: inline-block;
      /* For IE11/ MS Edge bug */
      pointer-events: none;
      text-decoration: none;
}

.posArrow {
      color: green;
}

.negArrow {
      color: red;
}

body .row {
      margin-left: -10px;
      margin-right: -10px;
}


.clsSelectedPointOption {
      padding-left: 10px;
}

.clsSelectedTeamDropDown {
      padding-left: 10px;
}

.clsSelectedPos {
      padding-left: 10px;
}

.innerTeamActive {
      background-color: lavender;
}



@media (min-width: 0px) and (max-width: 650px) {
      .innerTeam {
            display: inline-block;
            padding: 2px;
            border: 1px solid #d7cdcd;
            border-radius: 5px;
            margin-left: 5px;
      }

      .spanTeamNameHeader {
            font-size: 14px;
            font-weight: 600;
            color: #286090;
            padding-right: 5px;
            min-width: 40px;
            max-width: 40px;
            display: inline-block
      }

      .spanTeamNameHeaderPoints {
            font-size: 14px;
            font-weight: 600;
            color: #286090;
            padding-right: 5px;
            min-width: 35px;
            max-width: 35px;
            display: inline-block
      }

      .clsHideDetailView {
            float: right;
            padding-right: 0px;
            padding-top: 10px;
            color: red;
      }

      .clsNextMatch {
            width: 100%;
            text-align: center;
      }

      .clsNextMatchHypen {
            display: none;
      }

      .clsNextMatchPer {
            display: inline-block;
            text-align: right;
            width: 70%;
      }

      .clsNextMatchArr {
            display: inline-block;
      }

      .clsCurMatch {
            width: 100%;
            text-align: center;
      }

      .clsCurMatchPer {
            display: inline-block;
            text-align: center;
            width: 100%;
      }
}

@media (min-width: 650px) and (max-width: 5000px) {
      .innerTeam {
            display: inline-block;
            padding: 5px;
            border: 1px solid #d7cdcd;
            border-radius: 5px;
            margin: 5px;
      }

      .spanTeamNameHeader {
            font-size: 14px;
            font-weight: 600;
            color: #286090;
            padding-right: 5px;
            min-width: 45px;
            display: inline-block
      }

      .spanTeamNameHeaderPoints {
            font-size: 14px;
            font-weight: 600;
            color: #286090;
            padding-right: 5px;
            min-width: 40px;
            max-width: 40px;
            display: inline-block
      }



      .clsSelectedPointOption {
            padding-left: 5px;
      }

      .clsSelectedTeamDropDown {
            padding-left: 5px;
      }

      .clsSelectedPos {
            padding-left: 5px;
      }


      .clsHideDetailView {
            float: right;
            padding-right: 5px;
            padding-top: 10px;
            color: red;
      }


      .clsNextMatch {
            display: inline-block;
            width: 58%;
            text-align: right;
      }

      .clsNextMatchHypen {
            display: inline-block;
            width: 5%;
            text-align: center
      }

      .clsNextMatchPer {
            display: inline-block;
            width: 25%;
            text-align: right;
      }

      .clsNextMatchArr {
            display: inline-block;
            width: 5%;
      }


      .clsCurMatch {
            display: inline-block;
            width: 70%;
            text-align: right;
      }

      .clsCurMatchPer {
            display: inline-block;
            width: 20%;
            text-align: right
      }
}

.loader {
      position: fixed;
      left: 0px;
      top: 0px;
      width: 100%;
      height: 100%;
      z-index: 9999;
      background: url('loading.gif') 50% 50% no-repeat rgb(249, 249, 249);
      opacity: 0.5;
}

.spanTeamNameHeader1 {
      font-size: 12px;
      font-weight: 600;
      color: #286090;
      padding-right: 5px;
}


body a {

      cursor: pointer;
}


body input {

      cursor: pointer;
}

body select {

      cursor: pointer;
}

.glyphicon-remove-circle {

      cursor: pointer;
}

.displayPoints {
      padding-top: 15px;
      padding-bottom: 10px;
      margin-bottom: 10px;
      opacity: 1!important;
      height: auto!important;
}

.spanTeamNameHeaderActive {
      color: maroon;
}


.barcls-center {
      text-align: center!important
}

.barcls-right {
      text-align: right!important
}

.barcls-green,
.barcls-hover-green:hover {
      color: #fff!important;
      background-color: #4CAF50!important
}

.barcls-light-grey,
.barcls-hover-light-grey:hover,
.barcls-light-gray,
.barcls-hover-light-gray:hover {
      color: #000!important;
      background-color: #f1f1f1!important
}

.barcls-container,
.barcls-panel {
      padding: 0.01em 16px
}

.barcls-panel {
      margin-top: 16px;
      margin-bottom: 16px
}

.barcls-container:after,
.barcls-container:before,
.barcls-panel:after,
.barcls-panel:before,
.barcls-row:after,
.barcls-row:before,
.barcls-row-padding:after,
.barcls-row-padding:before,
.barcls-cell-row:before,
.barcls-cell-row:after,
.barcls-clear:after,
.barcls-clear:before,
.barcls-bar:before,
.barcls-bar:after {
      content: "";
      display: table;
      clear: both
}

.barcls-red,
.barcls-hover-red:hover {
      color: #fff!important;
      background-color: #f44336!important
}

.barcls-blue,
.barcls-hover-blue:hover {
      color: #fff!important;
      background-color: #2196F3!important
}
.barcls-contentright {
      position: absolute;
      z-index: 2225;
      right: 0;
      background-color: transparent;
}

.barcls-contentpercentage1 {
      width: 85%;position: absolute;z-index: 2223;color:transparent;
      text-align: left!important;
}

.barcls-contentpercentage2 {
      width: 85%;position: absolute;z-index: 2223;color:#555;
      text-align: left!important;
}

.barcls-contentpercentage3 {
      width: 85%;position: absolute;z-index: 2223;color:#555;
      text-align: left!important;
}

.barcls-barcolor1,
.barcls-hover-barcolor1:hover {
      background-color: #4CAF50!important
}

.barcls-barcolor2,
.barcls-hover-barcolor2:hover {
      background-color:#f38630!important
}

.barcls-barcolor3,
.barcls-hover-barcolor3:hover {
      background-color: #fff59a!important
}


.spanCurrent {
      padding:5px;
      background-color: #4CAF50!important;
      color: #4CAF50!important;
      font-size: 1px;vertical-align: super;
      margin-right: 5px;
}


.spanNext1 {
      padding:5px;
      background-color: #f38630!important;
      color: #f38630!important;
      font-size: 1px;vertical-align: super;
      margin-right: 5px;
}

.spanNext2 {
      padding:5px;
      background-color: #fff59a!important;
      color: #fff59a!important;
      font-size: 1px;vertical-align: super;
      margin-right: 5px;
}

.barcls-contentfillgap {
      position: absolute;
      color:transparent;
      z-index: 2221;
      right: 0;
      z-index: 100;
      background-color: lightgrey;
      width:100%;      
}

.barclsHeader {
      position:relative;display:block;height:15px;cursor: pointer;
}

.highlightbar {
      border: 1px solid black;
}

.highlightbartopleft {
      border-top : 1px solid black;
      border-left : 1px solid black;
}
.headerCurrent {
      border:1px solid blue;
      padding:8px;
      display:inline-block;
      border-radius: 10px;
      background-color:#4CAF50;
}
.headerNext1 {
      border:1px solid blue;
      padding:8px;
      display:inline-block;
      border-radius: 10px;
      background-color:#f38630;

}
.headerNext2 {
      border:1px solid blue;
      padding:8px;
      display:inline-block;
      border-radius: 10px;
      background-color: #fff59a;

}

.hideNews {
      opacity:0; transition: opacity 1s;     
}

.showNews {
      opacity:1; transition: opacity 1s;     
}
</style>


</html>